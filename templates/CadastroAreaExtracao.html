<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cadastro Extra√ß√µes por √Årea</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    tbody > tr:nth-child(odd) {
      background-color: #cfd8dd;
    }

    .botao-adicionar { background-color: #072749; }
    .botao-atualizar { background-color: #1fa53c; }
    .botao-excluir { background-color: #be0d0d; }
    .botao-salvar { background-color: #ff9900; }
    .botao-voltar { background-color: #6c757d; }

    .botao-adicionar, .botao-atualizar, .botao-excluir, .botao-salvar, .botao-voltar {
      font-size: 18px;
      color: white;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      border: none;
      padding: 6px 20px;
      cursor: pointer;
    }

    .botao-adicionar:hover { background-color: #0056b3; }
    .botao-atualizar:hover { background-color: #128d2e; }
    .botao-excluir:hover { background-color: #ec5050; }
    .botao-salvar:hover { background-color: #ffa733; }
    .botao-voltar:hover { background-color: #5a6268; }

    .botao-adicionar::after, .botao-atualizar::after, .botao-excluir::after, .botao-salvar::after, .botao-voltar::after {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transform: skewX(-20deg);
      transition: left 0.5s ease;
    }

    .botao-adicionar:hover::after,
    .botao-atualizar:hover::after,
    .botao-excluir:hover::after,
    .botao-salvar:hover::after,
    .botao-voltar:hover::after {
      left: 100%;
    }

    .form-label {
      font-weight: bold;
    }

    input[readonly] {
      background-color: #f1f1f1;
    }
  </style>
</head>
<body>

  <div class="container">
    <h2 class="mb-4">Cadastro das Extra√ß√µes por √Årea</h2>

    <form method="POST" action="SalvarExtracao.php">
      <div class="row g-3">
        <div class="col-md-4">
          <label for="area" class="form-label">√Årea</label>
          <select id="area" name="area" class="form-select">
            <option value=""></option>
            <option value="√Årea 1">√Årea 1</option>
            <option value="√Årea 2">√Årea 2</option>
          </select>
        </div>

        <div class="col-md-4">
          <label for="extracao" class="form-label">Extra√ß√£o</label>
          <select id="extracao" name="extracao" class="form-select">
            <option value=""></option>
            <option value="Extra√ß√£o 1">Extra√ß√£o 1</option>
            <option value="Extra√ß√£o 2">Extra√ß√£o 2</option>
          </select>
        </div>

        <div class="col-md-4">
          <label for="AtivarAreaExtracao" class="form-label">Ativar</label>
          <select id="AtivarAreaExtracao" name="AtivarAreaExtracao" class="form-select">
            <option value=""></option>
            <option value="sim">Sim</option>
            <option value="nao">N√£o</option>
          </select>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-md-6">
          <label for="buscaNome" class="form-label">Buscar por Nome</label>
          <input type="text" id="buscaNome" class="form-control" />
        </div>
        <div class="col-md-6 d-flex align-items-end">
          <button type="button" class="botao-atualizar" onclick="buscarLinha()">üîç Buscar</button>
        </div>
      </div>

      <div class="d-flex flex-wrap gap-2 mt-4">
        <button type="button" class="botao-adicionar" onclick="adicionarLinha()">‚ûï Adicionar</button>
        <button type="submit" class="botao-salvar">üíæ Salvar</button>
        <a href="{{ url_for('Home.home') }}" class="botao-voltar text-decoration-none d-inline-block text-center">‚Ü© Sair</a>
      </div>
    </form>

    <table class="table table-bordered table-striped mt-4">
      <thead class="table-primary">
        <tr>
          <th>√Årea</th>
          <th>Extra√ß√£o</th>
          <th>Ativar Extra√ß√£o</th>
          <th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody id="tabela">
        <!-- Linhas adicionadas dinamicamente -->
      </tbody>
    </table>
  </div>

  <script>
    function adicionarLinha() {
      const area = document.getElementById('area').value;
      const extracao = document.getElementById('extracao').value;
      const ativar = document.getElementById('AtivarAreaExtracao').value;

      if (!area || !extracao || !ativar) {
        alert('Preencha todos os campos!');
        return;
      }

      const tabela = document.getElementById('tabela');
      const novaLinha = tabela.insertRow();

      novaLinha.insertCell(0).textContent = area;
      novaLinha.insertCell(1).textContent = extracao;
      novaLinha.insertCell(2).textContent = ativar;

      document.getElementById('area').value = '';
      document.getElementById('extracao').value = '';
      document.getElementById('AtivarAreaExtracao').value = '';
    }

    function buscarLinha() {
      const termo = document.getElementById("buscaNome").value.toLowerCase();
      const linhas = document.querySelectorAll("#tabela tr");

      let encontrado = false;

      linhas.forEach(linha => {
        const extracao = linha.cells[1].textContent.toLowerCase();
        if (extracao.includes(termo)) {
          document.getElementById("area").value = linha.cells[0].textContent;
          document.getElementById("extracao").value = linha.cells[1].textContent;
          document.getElementById("AtivarAreaExtracao").value = linha.cells[2].textContent;
          encontrado = true;
        }
      });

      if (!encontrado) {
        alert("Extra√ß√£o n√£o encontrada.");
      }
    }

    function atualizarLinha() {
      alert("Fun√ß√£o de atualiza√ß√£o ainda n√£o implementada.");
    }

    function excluirLinha() {
      const termo = document.getElementById("buscaNome").value.toLowerCase();
      const linhas = document.querySelectorAll("#tabela tr");

      linhas.forEach((linha, index) => {
        const extracao = linha.cells[1].textContent.toLowerCase();
        if (extracao.includes(termo)) {
          document.getElementById("tabela").deleteRow(index);
        }
      });
    }
  </script>
</body>
</html>
